# 프로토콜이란?
데이터 전송 규약

# TCP

- http, https 등 웹 브라이징의 기본 데이터 전송 방식
- 일반적으로 IP(Internet Protocol) 과 함께 사용된다.
- 데이터 전송 단위는 세그먼트(Segment) 이라고 한다.
  - 각 Segment 는 Sequence Number 를 가지고 있기 때문에, 순서를 보장한다.

## 연결 지향 방식
통신을 시작하기 전에 송신자와 수신자 간의 연결을 미리 설정한다.
이 연결 과정은 "3-way handshaking" 이라고 한다.

### 3-way handshaking
> **클라이언트 -> 서버:**
>
> 클라이언트는 SYN 패킷을 서버로 전송하고, Sequence Number = X (X는 난수)로 설정.

> **서버 -> 클라이언트:**
>
> 서버는 SYN-ACK 패킷을 클라이언트로 전송하고, Acknowledge Number = X + 1, Sequence Number = Y (Y는 난수)로 설정.

> **클라이언트 -> 서버:**
>
> 클라이언트는 ACK 패킷을 서버로 전송하고, Acknowledge Number = Y + 1로 설정.
연결이 성립됨.

_(연결을 종료할 경우, 4-way handshaking 를 실행한다.)_

## 신뢰성 보장

### 흐름제어 / 혼잡제어
- 전송할 전체 데이터 중, 수신 측에서 수용가능할 정도의 양(Segment 단위)으로 나눠 전송한다.
  - **Sliding Window** 라는 방식이다.
  - 송신 측은 Window 크기만큼의 Segment 전송 후, 확인 응답을 대기한다.
  - 수신 되었다는 응답(ACK)이 반환될 경우, 다음 Window 만큼의 Segment 를 전송할 수 있다.

### 오류 검사
- TCP 세그먼트의 헤더에는 Checksum 필드를 포함한다.
- Checksum은 데이터가 전송 중에 손상되었는지 확인하는 오류 검출 코드이다.
#### Checksum 활용 과정
  1. 송신 측에서는 세그먼트에 포함된 데이터와 헤더 정보를 기반으로 Checksum 값을 계산하여 헤더에 추가한다.
  2. 수신 측에서는 도착한 세그먼트의 데이터를 기반으로 다시 Checksum을 계산한 뒤, 헤더에 포함된 원래 Checksum 값과 비교한다.
      - _만약 Checksum 이 일치하지 않는다면, 수신 측은 해당 세그먼트를 무시하거나 폐기하고 송신 측에 이를 명시적으로 알리지는 않는다._
      - _오류가 발생한 세그먼트는 ACK 응답을 받지 못하므로, 송신 측에서는 ACK 응답을 기다리다가 타임아웃이 발생하면 해당 세그먼트를 재전송한다._


# UDP
- 빠르고 간단한 통신을 지원한다.
- 신뢰성이나 데이터 무결성을 보장하지 않는다.
- 데이터 전송 단위는 데이터그램(Datagram) 이라고 한다.
  - 특정 순서를 유지하지 않는다.

## 비연결 지향 방식
- 데이터를 전송하기 전에 송신자와 수신자 간의 연결을 설정하지 않는다. (3-way handshaking 안함)
- 네트워크 지연을 줄이고 빠른 데이터 전송을 가능하다.

## 신뢰성 보장 없음
- 데이터가 도착하지 않거나 손상되었을 때 송신자에게 이를 알릴 방법이 없다.
- 흐름 제어, 혼잡 제어, 오류 검사 같은 기능이 없다.
- 자동으로 재전송되는 일이 없다.


## UDP의 사용 사례
### 1. 실시간 애플리케이션
- VoIP (Voice over IP), 온라인 게임, 실시간 스트리밍과 같은 애플리케이션에서는 지연을 최소화하는 것이 좋다. 
- 일부 패킷이 손실되더라도 큰 문제를 일으키지 않으며, 빠른 전송이 더 중요한 케이스이다.

### 2. 멀티캐스트/브로드캐스트

#### 브로드캐스트
- 하나의 송신자가 **같은 네트워크 내** 의 **모든 장치에** 데이터를 전송하는 방식

#### 멀티캐스트
- 하나의 송신자가 다수의 수신자 중 **특정 그룹에 속한 장치들에만** 데이터를 전송하는 방식
- 라우팅을 통해 **다른 네트워크로 전송 가능**

### 3. DNS (Domain Name System)
- **DNS** 는 사람이 읽을 수 있는 **도메인 이름(예: www.google.com)** 을 **컴퓨터가 이해할 수 있는 IP 주소(예: 142.250.72.206)** 로 변환해주는 서비스
- UDP를 사용하여 빠른 쿼리 응답을 제공한다.